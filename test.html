<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print Text to A4</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            margin: 20px;
        }
        textarea {
            width: 100%;
            height: 200px;
        }
        #print-btn {
            margin-top: 10px;
        }
        @media print {
            @page {
                size: A4;
                margin: 0;
            }
            .page {
                page-break-after: always;
                display: block;
                width: 100%;
                height: 100%;
                box-sizing: border-box;
                padding: 20mm;
            }
            .left, .right {
                float: left;
                width: 48%;
                box-sizing: border-box;
                padding: 10px;
            }
            .right {
                float: right;
                width: 48%;
                text-align: right;
            }
            .clearfix::after {
                content: "";
                display: table;
                clear: both;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <textarea id="inputText" placeholder="Enter text here..."></textarea>
        <br>
        <input type="text" id="heading" placeholder="Enter heading (optional)">
        <br>
        <button id="print-btn">Print</button>
    </div>

    <script>
        document.getElementById('print-btn').addEventListener('click', function() {
            const inputText = document.getElementById('inputText').value;
            const heading = document.getElementById('heading').value;
            const pageWidth = 190; // approx. width in mm (A4 width - margins)
            const pageHeight = 277; // approx. height in mm (A4 height - margins)
            const lineHeight = 6; // approx. height of a line in mm
            const charsPerLine = Math.floor(pageWidth / 5); // approx chars per line, adjust as needed
            const linesPerPage = Math.floor(pageHeight / lineHeight);

            function splitTextIntoPages(text) {
                const pages = [];
                let currentPage = '';
                let currentLine = '';
                const lines = text.split('\n');

                lines.forEach(line => {
                    const words = line.split(' ');
                    words.forEach(word => {
                        if ((currentLine + word).length > charsPerLine) {
                            currentPage += currentLine + '\n';
                            if (currentPage.split('\n').length >= linesPerPage) {
                                pages.push(currentPage);
                                currentPage = '';
                            }
                            currentLine = word + ' ';
                        } else {
                            currentLine += word + ' ';
                        }
                    });
                    if (currentLine.trim()) {
                        currentPage += currentLine + '\n';
                        currentLine = '';
                    }
                });

                if (currentPage.trim()) {
                    pages.push(currentPage);
                }

                return pages;
            }

            function generatePrintHtml(pages, heading) {
                return pages.map(page => `
                    <div class="page">
                        ${heading ? `<h1>${heading}</h1>` : ''}
                        <div class="clearfix">
                            <div class="left">${page}</div>
                            <div class="right">${page}</div>
                        </div>
                    </div>
                `).join('');
            }

            const pages = splitTextIntoPages(inputText);
            const printWindow = window.open('', '', 'height=800,width=600');
            printWindow.document.write('<html><head><title>Print</title><style>' + document.querySelector('style').innerHTML + '</style></head><body>');
            printWindow.document.write(generatePrintHtml(pages, heading));
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.focus();
            printWindow.print();
        });
    </script>
</body>
</html>
